<div class="chargen">
	<h1>Song of Swords: Character Creation</h1>
	<div class="chargen__body">
		
		<section class="gen-general" id="gen-general">
			<div><label>Name:<input type="text" v-model="char.name"></input></label></div>
			<div><label>Gender:</label><select number v-model.number="char.gender"><option :value="0">Male</option><option :value="1">Female</option></select></div>
			<div><label>Left-handed?:<input type="checkbox" v-model="char.leftHanded"></input></label></div>
		</section>
		
		<section class="gen-campaign-type">
			<h2>Campaign Power</h2>
			<div v-for="(li, i) in campaignPowerLevels">
				<label><input type="radio" name="campaign-power" v-on:click="campaignPowLevelIndex=i" :checked="campaignPowLevelIndex == i">{{li.name}} (<span class="num">{{li.pcp}}</span> PCP Total) (Max <span class="num">{{li.maxCategoryPCP}}</span> PCP per category) </input></label>
			</div>
		</section>
				
		<section class="gen-categories">
			<h2>Categories <span class="valuer" :class="{'still-have':categoriesRemainingAssignable>0}">({{ categoriesRemainingAssignable }} remaining PCP)</span> <span class="valid" v-show="categoriesRemainingAssignable==0" style="color:green">Ok!</span></h2>
			<div v-for="(li, i) in categories"><label>{{li.name}}: </label><CategoryPCPInput :obj="li" prop="pcp" :magic="li.magic" :remainingAssignable="categoriesRemainingAssignable" :maxPCPPerCategory="campaignPowLevel.maxCategoryPCP" />PCP &nbsp;&nbsp;|{{campaignPowLevel.maxCategoryPCP}}</div>
		</section>
			
			
		<hr/>
			
			
		<!-- for each category -->
		<section class="gen-race" id="gen-race">
			<h2>Race <span class="valuer">(Tier {{raceTier}}) </span> <span class="valid" v-show="!promptSettleRaceTier" style="color:green">Ready.</span></h2>
			<div v-for="(tier, ti) in raceTierTable" :key="ti">
				{{ ti + 1 }}: ({{pcpForTiers[ti]}} PCP)
				<label :class="{disabled:ti>=raceTier}" v-for="(race, ri) in tier"><input type="radio" :disabled="ti>=raceTier" name="race" :checked="race.name == selectedRaceName" v-on:click="selectRaceAt(ti, ri)" :key="ri"></input>{{ race.name }}</label>
			</div>
			<div v-show="promptSettleRaceTier"><button style="margin-top:10px"  v-on:click="settleRaceTier()">Finalise Race/Tier!</button> <span class="invalid" style="color:red">&lt;&lt; Click this to confirm.</span></div>
		</section>
			
		<hr/>
				
		
			
		<section class="gen-attributes" id="gen-attributes">
			<h2>Attributes <span class="valuer" :class="{'still-have':remainingAttributePoints>0}">({{remainingAttributePoints}}  Attribute Points remaining.)</span> <span class="valuer">(Available: {{availableAttributePoints}}) </span><span class="valid" v-show="remainingAttributePoints==0" style="color:green">Ok!</span></h2>
			<div class="gen-col">
				<div><label>Strength:</label><AttributeInput :obj="char" prop="strength" :remainingAttributePoints="remainingAttributePoints" /></div>
				<div><label>Agility:</label><AttributeInput :obj="char" prop="agility" :remainingAttributePoints="remainingAttributePoints" /></div>
				<div><label>Endurance:</label><AttributeInput :obj="char" prop="endurance" :remainingAttributePoints="remainingAttributePoints" /></div>
				<div><label>Health:</label><AttributeInput :obj="char" prop="health" :remainingAttributePoints="remainingAttributePoints" /></div>
				<div><label>Willpower:</label><AttributeInput :obj="char" prop="willpower" :remainingAttributePoints="remainingAttributePoints" /></div>
				<div><label>Wit:</label><AttributeInput :obj="char" prop="wit" :remainingAttributePoints="remainingAttributePoints" /></div>
				<div><label>Intelligence:</label><AttributeInput :obj="char" prop="intelligence" :remainingAttributePoints="remainingAttributePoints" /></div>
				<div><label>Perception:</label><AttributeInput :obj="char" prop="perception" :remainingAttributePoints="remainingAttributePoints" /></div>
			</div>
		</section>

		<hr/>
		<section class="gen-bnb"  id="gen-bnb">
			<h2>Boons &amp; Banes <span class="valuer">(<span class="num">{{totalBnBScore }}</span> B&amp;B Points currently. (Pool: {{BnBpoints}} Points) ) </span>
			
			<span v-show="totalBnBScore<0" class="invalid"><span style="color:red">invalid!</span><i style="font-size:13px">(Need &gt;=0 B&amp;B points!<br/>Assign more PCP to 'Boons &amp; Banes' or buy more Banes to pay off debt!)</i></span>
			<span v-show="totalBnBScore>=0" class="valid">
				<span style="color:green">Ok!</span><br/><span v-show="totalBnBScore>0" style="color:#ff4444;font-size:13px">(but you have additional {{ totalBnBScore }} B&amp;B Points!)</span>
				<div class="opencloselink"><a href="#" v-show="showBnBs" v-on:click.prevent="showBnBs=false">^ Hide</a><a href="#" v-show="!showBnBs" v-on:click.prevent="showBnBs=true">Open &gt;</a> &nbsp;&nbsp;<a style="font-size:12px;float:right" href="#gen-skills" class="jumplink">Skip to Skills..</a></div>
			</span>
			
			</h2>
			<div v-show="shouldShowBnBs">
				<h3>Choose Boons: -{{ totalBoonExpenditure }}   <span v-show="true" style="color:#aaaaaa">&nbsp;&nbsp;({{maxBoonsSpendableLeft }})</span></h3>
				<div class="boon-tags">
					<BoonBaneInput v-for="(li, i) in boonAssignList" :key="i" :obj="li" prop="rank" v-on:resetBB="resetBB" v-on:uncancel="uncancel" v-on:addBB="addBB" v-on:removeBB="removeBB"  :remaining="maxBoonsSpendableLeft" />
				</div>	
				<h3>Choose Banes: +{{ totalBanePointsEarned }}, ~{{ totalBanePointsSpent }}</h3>
				<div class="bane-tags">
					<BoonBaneInput v-for="(li, i) in baneAssignList" :key="i" :obj="li" prop="rank" v-on:resetBB="resetBB" v-on:uncancel="uncancel"  v-on:addBB="addBB" v-on:removeBB="removeBB"  />	
				</div>
				
				<br/>
				
				<div class="bb-details">
				<h3><span class="underline">Boon(s):</span><span class="header-liners"><a :href="li.__hasUIFields__ ? '#'+getBnBSlug(li.boon.name) : undefined" :class="{canceled:li._canceled}" v-for="li in boonsArray">{{li.boon.name}}</a></span></h3>
				<bb-apply v-for="(li,i) in boonsArray" :key="li.get_uid()" :assign="li" :remainingPoints="maxBoonsSpendableLeft"></bb-apply>
				</div>
				<div class="bb-details">
					<h3><span>Bane(s):</span><span class="header-liners"></span><span class="header-liners"><a :href="li.__hasUIFields__ ? '#'+getBnBSlug(li.bane.name) : undefined"  :class="{canceled:li._canceled}" v-for="li in banesArray">{{li.bane.name}}</a></span></h3>
					<bb-apply v-for="(li,i) in banesArray" :key="li.get_uid()" :assign="li"></bb-apply>
				</div>
			</div>
		</section>
			
		<hr/>
			
		<section class="gen-skills"  id="gen-skills">
			<h2>Skills <span class="valuer" :class="{'still-have':totalSkillPointsLeft!=0}">({{totalSkillPointsLeft}} Skill Points remaining.) {{ individualSkillsRemaining }}</span> <span class="valuer">(Available: {{totalSkillPointsProvided}}) </span></h2>
			<h3>Skill(s):</h3>
			<div class="skill-lib">
				<SkillLibInput v-for="(attribs, name) in skillsTable.skillHash" v-if="!skillsTable.requiresSpecialisation[name]" :key="name" :obj="skillValues" :prop="name" :skillsTable="skillsTable" :skillLevelsPacket="skillPacketValues" :remaining="individualSkillsRemaining" v-on:change="onSkillIndividualChange" />
			</div>
			<div class="packet-selection-mode">
				<b>Buy Packets:</b>
				<label><input type="radio" name="packetSelectionMode" :checked="!packetChoosy" v-on:click="packetChoosy = false"></input>Pennywise</label>
				<label><input type="radio" name="packetSelectionMode" :checked="packetChoosy" v-on:click="packetChoosy = true"></input>Pennywise and Choosy</label>
			</div>
			<div class="packet-list">
				<SkillPacketInput v-for="(packet,i) in skillPackets" v-on:change="onSkillPacketChange" :obj="packet" prop="qty" :labelMap="skillLabelMappings" :labelSchema="skillLabelMappingBases" :key="packet.name" :index="i" :skillPacketsRemaining="skillPacketsRemaining" :skillValues="skillPacketValues"  :packetChoosy="packetChoosy"  />
				<div style="clear:both"></div>
			</div>
			
		</section>
			
		<hr/>
		<section class="gen-social-class"  id="gen-social-class">
			<h2>Social Class/Wealth <span class="valuer">({{placeholder}} for {{placeholder}} PCP assigned)</span></h2>
		</section>

		<hr/>
		<section class="gen-schoolprofs"  id="gen-schoolprofs">
			<h2>School &amp; Profeciencies <span class="valuer">({{placeholder}} Profeciency Points remaining. (Available: {{ProfPoints}}) ) </span></h2>
		</section>
			
	
	</div>
	
	<hr/>
	<div class="chargen__footer">
		<section class="gen-inventory">
			<h2>Inventory</h2>
		</section>
		
		<hr/>
		<section class="wounds" v-show="false">
			<h2>Wounds</h2>
		</section>
		
		<section class="arcs">
			<h2>Arcs</h2>
			<div><label>Saga:</label><textarea v-model="char.arcSaga"></textarea></div>
			<div><label>Epic:</label><textarea v-model="char.arcEpic"></textarea></div>
			<div><label>Belief:</label><textarea v-model="char.arcBelief"></textarea></div>
			<div><label>Glory:</label><textarea v-model="char.arcGlory"></textarea></div>
			<div><label>Flaw:</label><textarea :disabled="!isHuman" v-model="char.arcFlaw"></textarea></div>
		</section>
		<button>Save Character</button>
	</div>
	
</div>
